version: 2

sources:
  - name: 'edr_configuration'
    schema: '{{ target.schema ~ "_elementary" }}'
    tables:
      - name: 'table_monitors_config'
        columns:
          - name: 'full_table_name'
            description: The fully qualified name of the monitored table
          - name: 'database_name'
            description: The database name of the monitored table
          - name: 'schema_name'
            description: The schema name of the monitored table
          - name: 'table_name'
            description: The name of the monitored table
          - name: 'timestamp_column'
            description: The timestamp column of the monitored table will be used to section the table into buckets and to check its freshness
          - name: 'bucket_duration_hours'
            description: The bucket duration in hours that will be used for training and validation of anomaly detection
          - name: 'table_monitored'
            description: A flag that indicates if this table should be monitored
          - name: 'table_monitors'
            description: A list of table monitors that will be used on this table, if empty all monitors are applied
          - name: 'columns_monitored'
            description: This flag determines whether or not column monitors should be applied to this table
      - name: 'column_monitors_config'
        columns:
          - name: 'full_column_name'
            description: The fully qualified name of the monitored column
          - name: 'database_name'
            description: The database name of the monitored column
          - name: 'schema_name'
            description: The schema name of the monitored column
          - name: 'table_name'
            description: The table name of the monitored column
          - name: 'column_name'
            description: The name of the monitored column
          - name: 'column_monitors'
            description: A list of column monitors that will be used on this table, if empty and columns_monitored is enabled for the table all monitors are applied
  - name: 'edr_dbt_artifacts'
    schema: '{{ target.schema ~ "_elementary" }}'
    tables:
      - name: 'dbt_run_results'
        columns:
          - name: 'model_execution_id'
          - name: 'unique_id'
          - name: 'invocation_id'
          - name: 'generated_at'
          - name: 'name'
          - name: 'status'
          - name: 'resource_type'
          - name: 'execution_time'
          - name: 'execute_started_at'
          - name: 'execute_completed_at'
          - name: 'compile_started_at'
          - name: 'compile_completed_at'
          - name: 'rows_affected'
          - name: 'full_refresh'
      - name: 'dbt_models'
        columns:
          - name: 'unique_id'
          - name: 'alias'
          - name: 'checksum'
          - name: 'materialization'
          - name: 'tags'
          - name: 'meta'
          - name: 'database_name'
          - name: 'schema_name'
          - name: 'depends_on_macros'
          - name: 'depends_on_nodes'
          - name: 'description'
          - name: 'name'
          - name: 'package_name'
          - name: 'original_path'
          - name: 'path'
          - name: 'generated_at'
      - name: 'dbt_tests'
        columns:
          - name: 'unique_id'
          - name: 'database_name'
          - name: 'schema_name'
          - name: 'name'
          - name: 'short_name'
          - name: 'alias'
          - name: 'test_column_name'
          - name: 'severity'
          - name: 'warn_if'
          - name: 'error_if'
          - name: 'tags'
          - name: 'meta'
          - name: 'depends_on_macros'
          - name: 'depends_on_nodes'
          - name: 'description'
          - name: 'package_name'
          - name: 'original_path'
          - name: 'path'
          - name: 'generated_at'
      - name: 'dbt_sources'
        columns:
          - name: 'unique_id'
          - name: 'database_name'
          - name: 'schema_name'
          - name: 'source_name'
          - name: 'name'
          - name: 'identifier'
          - name: 'loaded_at_field'
          - name: 'freshness_warn_after'
          - name: 'freshness_error_after'
          - name: 'freshness_filter'
          - name: 'relation_name'
          - name: 'tags'
          - name: 'meta'
          - name: 'package_name'
          - name: 'original_path'
          - name: 'path'
          - name: 'source_description'
          - name: 'description'
          - name: 'generated_at'
      - name: 'dbt_exposures'
        columns:
          - name: 'unique_id'
          - name: 'name'
          - name: 'maturity'
          - name: 'type'
          - name: 'owner_email'
          - name: 'owner_name'
          - name: 'url'
          - name: 'depends_on_macros'
          - name: 'depends_on_nodes'
          - name: 'description'
          - name: 'tags'
          - name: 'meta'
          - name: 'package_name'
          - name: 'original_path'
          - name: 'path'
          - name: 'generated_at'
      - name: 'dbt_metrics'
        columns:
          - name: 'unique_id'
          - name: 'name'
          - name: 'label'
          - name: 'model'
          - name: 'type'
          - name: 'sql'
          - name: 'timestamp'
          - name: 'filters'
          - name: 'time_grains'
          - name: 'dimensions'
          - name: 'depends_on_macros'
          - name: 'depends_on_nodes'
          - name: 'description'
          - name: 'tags'
          - name: 'meta'
          - name: 'package_name'
          - name: 'original_path'
          - name: 'path'
          - name: 'generated_at'
